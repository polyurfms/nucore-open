= content_for :h1 do
  = current_facility
= content_for :sidebar do
  = render "admin/shared/sidenav_product", sidenav_tab: @product.class.name.pluralize.underscore
= content_for :tabnav do
  = render "admin/shared/tabnav_product", secondary_tab: "addition_pricing_rules"

= content_for :head_content do
  = javascript_include_tag "addition_pricing_rule_datepicker.js"

-# = render "shared/transactions/headers"

%h2= @product
%p= text("description")

- if @current_price_policies.empty?
  %p.notice= text("none")
  
  = simple_form_for @search_form, url: url_for, method: :get, html: { class: "search_form" }, defaults: { required: false } do |f|
    .row
      %fieldset.span2#calendar_filter
        = f.input :date_range_start, input_html: {class: ["datepicker"] }, label: t("reports.fields.date_start")
          
      .submit_button.span12
        = f.submit t("shared.filter"), class: "btn float-left"
- else
  - if can?(:create, PricePolicy)
    %ul.inline
      %li= link_to text("add"), facility_instrument_additional_price_policy_add_path(current_facility, @product, @current_start_date.strftime("%Y-%m-%d")), class: "btn-add"

  %h3= text("current")
  - policy = @current_price_policies.first
  %h4= text("views.additional_price_policies.index.dates", start: human_date(@current_start_date), expires: human_date(@current_expires_date)) unless @current_price_policies.nil?

  = simple_form_for @search_form, url: url_for, method: :get, html: { class: "search_form" }, defaults: { required: false } do |f|
    .row
      %fieldset.span2#calendar_filter
        = f.input :date_range_start, input_html: {class: ["datepicker"] }, label: t("reports.fields.date_start")
          
      .submit_button.span12
        = f.submit t("shared.filter"), class: "btn float-left"

  - if @current_price_policies.first.additional_price_policy.any? == false
    %p.notice= text("no_addition")
  - else 
    = render "table",
        additional_price_policies: @current_additional_price_policies,
        price_policies: @current_price_policies


  